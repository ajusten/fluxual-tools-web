(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"6iH4":function(e,t,r){"use strict";r.r(t);var n=r("8Y7J"),i="## What is JMESPath?\r\n\r\nJMESPath is a query language used to transform JSON documents.",s=r("CNpV"),a=r("omGn"),u=r("CY5v");class o{constructor(){this.tool={id:"json-jmespath",action:"Evaluate",demo:{path:"countries[].stateOrProvinces[]",input:JSON.stringify(u.a,null,3)},schema:(new a.a).stringProperty("path",e=>e.title("JMESPath").description("JMESPath expression to evaluate").required()).textareaProperty("input",e=>e.title("JSON").description("JSON to evaluate expression against").required()).create(),onTransform:e=>s.search(JSON.parse(e.input),e.path),documentation:i}}}class c{}var h=r("t68o"),l=r("zbXB"),p=r("NcP4"),f=r("oMTq"),_=r("pMnS"),d=r("SVse"),v=r("s7LF"),b=r("/q54"),y=r("QQfA"),E=r("IP0z"),m=r("/Co4"),g=r("POq0"),k=r("Xd0L"),x=r("s6ns"),S=r("821u"),w=r("/HVE"),T=r("JjoW"),N=r("cUpR"),j=r("qJ5m"),L=r("Mz6y"),P=r("qgBN"),O=r("ZcxY"),R=r("IheW"),C=r("VDRc"),I=r("ura0"),M=r("Nhcz"),F=r("u9T3"),J=r("zMNK"),A=r("hOhj"),H=r("Fwaw"),q=r("mkRZ"),z=r("igqZ"),B=r("r0V8"),Q=r("kNGD"),U=r("5GAg"),V=r("5Bek"),D=r("c9fC"),G=r("HsOI"),K=r("Gi4r"),W=r("oapL"),Z=r("ZwOa"),Y=r("elxJ"),X=r("lT8R"),$=r("pBi1"),ee=r("qJ50"),te=r("rWV4"),re=r("02hT"),ne=r("Q+lL"),ie=r("BzsH"),se=r("KnIn"),ae=r("pKmL"),ue=r("iInd"),oe=r("dvZr"),ce=r("v9Ap"),he=r("UxM3");r.d(t,"JsonJmesPathModuleNgFactory",(function(){return le})),r.d(t,"RenderType_JsonJmesPathComponent",(function(){return pe})),r.d(t,"View_JsonJmesPathComponent_0",(function(){return fe})),r.d(t,"View_JsonJmesPathComponent_Host_0",(function(){return _e})),r.d(t,"JsonJmesPathComponentNgFactory",(function(){return de}));var le=n.rb(c,[],(function(e){return n.Db([n.Eb(512,n.j,n.ab,[[8,[h.a,l.b,l.a,p.a,f.z,f.A,f.B,f.C,f.D,f.E,f.F,f.G,f.H,f.I,f.J,f.K,f.L,f.M,f.N,f.O,f.P,f.Q,f.R,f.S,f.c,f.d,f.e,f.f,f.g,f.h,f.i,f.j,f.k,f.l,f.m,f.n,f.o,f.p,f.q,f.r,f.s,f.t,f.u,f.v,f.w,f.x,f.y,_.a,de]],[3,n.j],n.w]),n.Eb(4608,d.m,d.l,[n.t,[2,d.B]]),n.Eb(4608,v.z,v.z,[]),n.Eb(4608,v.g,v.g,[]),n.Eb(5120,n.b,(function(e,t){return[b.j(e,t)]}),[d.d,n.A]),n.Eb(4608,y.c,y.c,[y.i,y.e,n.j,y.h,y.f,n.q,n.y,d.d,E.b,[2,d.g]]),n.Eb(5120,y.j,y.k,[y.c]),n.Eb(5120,m.b,m.c,[y.c]),n.Eb(4608,g.c,g.c,[]),n.Eb(4608,k.b,k.b,[]),n.Eb(5120,x.b,x.c,[y.c]),n.Eb(135680,x.d,x.d,[y.c,n.q,[2,d.g],[2,x.a],x.b,[3,x.d],y.e]),n.Eb(4608,S.i,S.i,[]),n.Eb(5120,S.a,S.b,[y.c]),n.Eb(4608,k.a,k.w,[[2,k.f],w.a]),n.Eb(5120,T.a,T.b,[y.c]),n.Eb(4608,N.e,k.c,[[2,k.g],[2,k.l]]),n.Eb(5120,j.b,j.a,[[3,j.b]]),n.Eb(5120,L.a,L.b,[y.c]),n.Eb(4608,P.d,P.d,[]),n.Eb(5120,P.h,(function(){return[new P.l,new P.I]}),[]),n.Eb(4608,P.H,P.H,[]),n.Eb(4608,P.g,P.g,[P.h,P.H]),n.Eb(4608,O.c,O.c,[n.A,[2,R.a],N.b,O.d]),n.Eb(1073742336,d.c,d.c,[]),n.Eb(1073742336,v.y,v.y,[]),n.Eb(1073742336,v.l,v.l,[]),n.Eb(1073742336,v.u,v.u,[]),n.Eb(1073742336,b.c,b.c,[]),n.Eb(1073742336,E.a,E.a,[]),n.Eb(1073742336,C.i,C.i,[]),n.Eb(1073742336,I.b,I.b,[]),n.Eb(1073742336,M.a,M.a,[]),n.Eb(1073742336,F.a,F.a,[[2,b.g],n.A]),n.Eb(1073742336,k.l,k.l,[[2,k.d],[2,N.f]]),n.Eb(1073742336,w.b,w.b,[]),n.Eb(1073742336,k.v,k.v,[]),n.Eb(1073742336,k.t,k.t,[]),n.Eb(1073742336,k.q,k.q,[]),n.Eb(1073742336,J.g,J.g,[]),n.Eb(1073742336,A.c,A.c,[]),n.Eb(1073742336,y.g,y.g,[]),n.Eb(1073742336,m.e,m.e,[]),n.Eb(1073742336,H.c,H.c,[]),n.Eb(1073742336,q.e,q.e,[]),n.Eb(1073742336,z.f,z.f,[]),n.Eb(1073742336,g.d,g.d,[]),n.Eb(1073742336,B.d,B.d,[]),n.Eb(1073742336,B.c,B.c,[]),n.Eb(1073742336,Q.e,Q.e,[]),n.Eb(1073742336,x.g,x.g,[]),n.Eb(1073742336,U.a,U.a,[]),n.Eb(1073742336,S.j,S.j,[]),n.Eb(1073742336,V.c,V.c,[]),n.Eb(1073742336,D.c,D.c,[]),n.Eb(1073742336,G.e,G.e,[]),n.Eb(1073742336,K.c,K.c,[]),n.Eb(1073742336,W.c,W.c,[]),n.Eb(1073742336,Z.c,Z.c,[]),n.Eb(1073742336,k.x,k.x,[]),n.Eb(1073742336,k.n,k.n,[]),n.Eb(1073742336,Y.d,Y.d,[]),n.Eb(1073742336,T.d,T.d,[]),n.Eb(1073742336,X.b,X.b,[]),n.Eb(1073742336,$.d,$.d,[]),n.Eb(1073742336,$.c,$.c,[]),n.Eb(1073742336,ee.e,ee.e,[]),n.Eb(1073742336,j.c,j.c,[]),n.Eb(1073742336,te.k,te.k,[]),n.Eb(1073742336,L.c,L.c,[]),n.Eb(1073742336,P.N,P.N,[]),n.Eb(1073742336,P.f,P.f,[]),n.Eb(1073742336,P.m,P.m,[]),n.Eb(1073742336,P.e,P.e,[]),n.Eb(1073742336,k.m,k.m,[]),n.Eb(1073742336,re.b,re.b,[]),n.Eb(1073742336,ne.d,ne.d,[]),n.Eb(1073742336,ie.b,ie.b,[]),n.Eb(1073742336,O.b,O.b,[]),n.Eb(1073742336,se.a,se.a,[]),n.Eb(1073742336,ae.a,ae.a,[]),n.Eb(1073742336,ue.m,ue.m,[[2,ue.r],[2,ue.k]]),n.Eb(1073742336,c,c,[]),n.Eb(256,Q.a,{separatorKeyCodes:[oe.f]},[]),n.Eb(256,k.e,k.i,[]),n.Eb(256,O.d,{gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!0,smartypants:!1},[]),n.Eb(1024,ue.i,(function(){return[[{path:"",component:o}]]}),[])])})),pe=n.sb({encapsulation:2,styles:[],data:{}});function fe(e){return n.Pb(0,[(e()(),n.ub(0,0,null,null,1,"app-transform-tool",[],null,null,null,ce.b,ce.a)),n.tb(1,114688,null,0,he.a,[u.c],{tool:[0,"tool"]},null)],(function(e,t){e(t,1,0,t.component.tool)}),null)}function _e(e){return n.Pb(0,[(e()(),n.ub(0,0,null,null,1,"ng-component",[],null,null,null,fe,pe)),n.tb(1,49152,null,0,o,[],null,null)],null,null)}var de=n.qb("ng-component",o,_e,{},{},[])},CNpV:function(e,t,r){!function(e){"use strict";function t(e){return null!==e&&"[object Array]"===Object.prototype.toString.call(e)}function r(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function n(e,i){if(e===i)return!0;if(Object.prototype.toString.call(e)!==Object.prototype.toString.call(i))return!1;if(!0===t(e)){if(e.length!==i.length)return!1;for(var s=0;s<e.length;s++)if(!1===n(e[s],i[s]))return!1;return!0}if(!0===r(e)){var a={};for(var u in e)if(hasOwnProperty.call(e,u)){if(!1===n(e[u],i[u]))return!1;a[u]=!0}for(var o in i)if(hasOwnProperty.call(i,o)&&!0!==a[o])return!1;return!0}return!1}function i(e){if(""===e||!1===e||null===e)return!0;if(t(e)&&0===e.length)return!0;if(r(e)){for(var n in e)if(e.hasOwnProperty(n))return!1;return!0}return!1}var s;s="function"==typeof String.prototype.trimLeft?function(e){return e.trimLeft()}:function(e){return e.match(/^\s*(.*)/)[1]};var a=0,u=1,o=2,c=3,h=4,l=6,p=8,f=9,_={".":"Dot","*":"Star",",":"Comma",":":"Colon","{":"Lbrace","}":"Rbrace","]":"Rbracket","(":"Lparen",")":"Rparen","@":"Current"},d={"<":!0,">":!0,"=":!0,"!":!0},v={" ":!0,"\t":!0,"\n":!0};function b(e){return e>="0"&&e<="9"||"-"===e}function y(){}y.prototype={tokenize:function(e){var t,r,n,i,s=[];for(this._current=0;this._current<e.length;)if((i=e[this._current])>="a"&&i<="z"||i>="A"&&i<="Z"||"_"===i)t=this._current,r=this._consumeUnquotedIdentifier(e),s.push({type:"UnquotedIdentifier",value:r,start:t});else if(void 0!==_[e[this._current]])s.push({type:_[e[this._current]],value:e[this._current],start:this._current}),this._current++;else if(b(e[this._current]))n=this._consumeNumber(e),s.push(n);else if("["===e[this._current])n=this._consumeLBracket(e),s.push(n);else if('"'===e[this._current])t=this._current,r=this._consumeQuotedIdentifier(e),s.push({type:"QuotedIdentifier",value:r,start:t});else if("'"===e[this._current])t=this._current,r=this._consumeRawStringLiteral(e),s.push({type:"Literal",value:r,start:t});else if("`"===e[this._current]){t=this._current;var a=this._consumeLiteral(e);s.push({type:"Literal",value:a,start:t})}else if(void 0!==d[e[this._current]])s.push(this._consumeOperator(e));else if(void 0!==v[e[this._current]])this._current++;else if("&"===e[this._current])t=this._current,this._current++,"&"===e[this._current]?(this._current++,s.push({type:"And",value:"&&",start:t})):s.push({type:"Expref",value:"&",start:t});else{if("|"!==e[this._current]){var u=new Error("Unknown character:"+e[this._current]);throw u.name="LexerError",u}t=this._current,this._current++,"|"===e[this._current]?(this._current++,s.push({type:"Or",value:"||",start:t})):s.push({type:"Pipe",value:"|",start:t})}return s},_consumeUnquotedIdentifier:function(e){var t,r=this._current;for(this._current++;this._current<e.length&&((t=e[this._current])>="a"&&t<="z"||t>="A"&&t<="Z"||t>="0"&&t<="9"||"_"===t);)this._current++;return e.slice(r,this._current)},_consumeQuotedIdentifier:function(e){var t=this._current;this._current++;for(var r=e.length;'"'!==e[this._current]&&this._current<r;){var n=this._current;"\\"!==e[n]||"\\"!==e[n+1]&&'"'!==e[n+1]?n++:n+=2,this._current=n}return this._current++,JSON.parse(e.slice(t,this._current))},_consumeRawStringLiteral:function(e){var t=this._current;this._current++;for(var r=e.length;"'"!==e[this._current]&&this._current<r;){var n=this._current;"\\"!==e[n]||"\\"!==e[n+1]&&"'"!==e[n+1]?n++:n+=2,this._current=n}return this._current++,e.slice(t+1,this._current-1).replace("\\'","'")},_consumeNumber:function(e){var t=this._current;this._current++;for(var r=e.length;b(e[this._current])&&this._current<r;)this._current++;return{type:"Number",value:parseInt(e.slice(t,this._current)),start:t}},_consumeLBracket:function(e){var t=this._current;return this._current++,"?"===e[this._current]?(this._current++,{type:"Filter",value:"[?",start:t}):"]"===e[this._current]?(this._current++,{type:"Flatten",value:"[]",start:t}):{type:"Lbracket",value:"[",start:t}},_consumeOperator:function(e){var t=this._current,r=e[t];return this._current++,"!"===r?"="===e[this._current]?(this._current++,{type:"NE",value:"!=",start:t}):{type:"Not",value:"!",start:t}:"<"===r?"="===e[this._current]?(this._current++,{type:"LTE",value:"<=",start:t}):{type:"LT",value:"<",start:t}:">"===r?"="===e[this._current]?(this._current++,{type:"GTE",value:">=",start:t}):{type:"GT",value:">",start:t}:"="===r&&"="===e[this._current]?(this._current++,{type:"EQ",value:"==",start:t}):void 0},_consumeLiteral:function(e){this._current++;for(var t,r=this._current,n=e.length;"`"!==e[this._current]&&this._current<n;){var i=this._current;"\\"!==e[i]||"\\"!==e[i+1]&&"`"!==e[i+1]?i++:i+=2,this._current=i}var a=s(e.slice(r,this._current));return a=a.replace("\\`","`"),t=this._looksLikeJSON(a)?JSON.parse(a):JSON.parse('"'+a+'"'),this._current++,t},_looksLikeJSON:function(e){if(""===e)return!1;if('[{"'.indexOf(e[0])>=0)return!0;if(["true","false","null"].indexOf(e)>=0)return!0;if(!("-0123456789".indexOf(e[0])>=0))return!1;try{return JSON.parse(e),!0}catch(t){return!1}}};var E={};function m(){}function g(e){this.runtime=e}function k(e){this._interpreter=e,this.functionTable={abs:{_func:this._functionAbs,_signature:[{types:[a]}]},avg:{_func:this._functionAvg,_signature:[{types:[p]}]},ceil:{_func:this._functionCeil,_signature:[{types:[a]}]},contains:{_func:this._functionContains,_signature:[{types:[o,c]},{types:[u]}]},ends_with:{_func:this._functionEndsWith,_signature:[{types:[o]},{types:[o]}]},floor:{_func:this._functionFloor,_signature:[{types:[a]}]},length:{_func:this._functionLength,_signature:[{types:[o,c,h]}]},map:{_func:this._functionMap,_signature:[{types:[l]},{types:[c]}]},max:{_func:this._functionMax,_signature:[{types:[p,f]}]},merge:{_func:this._functionMerge,_signature:[{types:[h],variadic:!0}]},max_by:{_func:this._functionMaxBy,_signature:[{types:[c]},{types:[l]}]},sum:{_func:this._functionSum,_signature:[{types:[p]}]},starts_with:{_func:this._functionStartsWith,_signature:[{types:[o]},{types:[o]}]},min:{_func:this._functionMin,_signature:[{types:[p,f]}]},min_by:{_func:this._functionMinBy,_signature:[{types:[c]},{types:[l]}]},type:{_func:this._functionType,_signature:[{types:[u]}]},keys:{_func:this._functionKeys,_signature:[{types:[h]}]},values:{_func:this._functionValues,_signature:[{types:[h]}]},sort:{_func:this._functionSort,_signature:[{types:[f,p]}]},sort_by:{_func:this._functionSortBy,_signature:[{types:[c]},{types:[l]}]},join:{_func:this._functionJoin,_signature:[{types:[o]},{types:[f]}]},reverse:{_func:this._functionReverse,_signature:[{types:[o,c]}]},to_array:{_func:this._functionToArray,_signature:[{types:[u]}]},to_string:{_func:this._functionToString,_signature:[{types:[u]}]},to_number:{_func:this._functionToNumber,_signature:[{types:[u]}]},not_null:{_func:this._functionNotNull,_signature:[{types:[u],variadic:!0}]}}}E.EOF=0,E.UnquotedIdentifier=0,E.QuotedIdentifier=0,E.Rbracket=0,E.Rparen=0,E.Comma=0,E.Rbrace=0,E.Number=0,E.Current=0,E.Expref=0,E.Pipe=1,E.Or=2,E.And=3,E.EQ=5,E.GT=5,E.LT=5,E.GTE=5,E.LTE=5,E.NE=5,E.Flatten=9,E.Star=20,E.Filter=21,E.Dot=40,E.Not=45,E.Lbrace=50,E.Lbracket=55,E.Lparen=60,m.prototype={parse:function(e){this._loadTokens(e),this.index=0;var t=this.expression(0);if("EOF"!==this._lookahead(0)){var r=this._lookaheadToken(0),n=new Error("Unexpected token type: "+r.type+", value: "+r.value);throw n.name="ParserError",n}return t},_loadTokens:function(e){var t=(new y).tokenize(e);t.push({type:"EOF",value:"",start:e.length}),this.tokens=t},expression:function(e){var t=this._lookaheadToken(0);this._advance();for(var r=this.nud(t),n=this._lookahead(0);e<E[n];)this._advance(),r=this.led(n,r),n=this._lookahead(0);return r},_lookahead:function(e){return this.tokens[this.index+e].type},_lookaheadToken:function(e){return this.tokens[this.index+e]},_advance:function(){this.index++},nud:function(e){var t,r;switch(e.type){case"Literal":return{type:"Literal",value:e.value};case"UnquotedIdentifier":return{type:"Field",name:e.value};case"QuotedIdentifier":var n={type:"Field",name:e.value};if("Lparen"===this._lookahead(0))throw new Error("Quoted identifier not allowed for function names.");return n;case"Not":return{type:"NotExpression",children:[t=this.expression(E.Not)]};case"Star":return t=null,{type:"ValueProjection",children:[{type:"Identity"},t="Rbracket"===this._lookahead(0)?{type:"Identity"}:this._parseProjectionRHS(E.Star)]};case"Filter":return this.led(e.type,{type:"Identity"});case"Lbrace":return this._parseMultiselectHash();case"Flatten":return{type:"Projection",children:[{type:"Flatten",children:[{type:"Identity"}]},t=this._parseProjectionRHS(E.Flatten)]};case"Lbracket":return"Number"===this._lookahead(0)||"Colon"===this._lookahead(0)?(t=this._parseIndexExpression(),this._projectIfSlice({type:"Identity"},t)):"Star"===this._lookahead(0)&&"Rbracket"===this._lookahead(1)?(this._advance(),this._advance(),{type:"Projection",children:[{type:"Identity"},t=this._parseProjectionRHS(E.Star)]}):this._parseMultiselectList();case"Current":return{type:"Current"};case"Expref":return{type:"ExpressionReference",children:[r=this.expression(E.Expref)]};case"Lparen":for(var i=[];"Rparen"!==this._lookahead(0);)"Current"===this._lookahead(0)?(r={type:"Current"},this._advance()):r=this.expression(0),i.push(r);return this._match("Rparen"),i[0];default:this._errorToken(e)}},led:function(e,t){var r;switch(e){case"Dot":var n=E.Dot;return"Star"!==this._lookahead(0)?{type:"Subexpression",children:[t,r=this._parseDotRHS(n)]}:(this._advance(),{type:"ValueProjection",children:[t,r=this._parseProjectionRHS(n)]});case"Pipe":return{type:"Pipe",children:[t,r=this.expression(E.Pipe)]};case"Or":return{type:"OrExpression",children:[t,r=this.expression(E.Or)]};case"And":return{type:"AndExpression",children:[t,r=this.expression(E.And)]};case"Lparen":for(var i,s=t.name,a=[];"Rparen"!==this._lookahead(0);)"Current"===this._lookahead(0)?(i={type:"Current"},this._advance()):i=this.expression(0),"Comma"===this._lookahead(0)&&this._match("Comma"),a.push(i);return this._match("Rparen"),{type:"Function",name:s,children:a};case"Filter":var u=this.expression(0);return this._match("Rbracket"),{type:"FilterProjection",children:[t,r="Flatten"===this._lookahead(0)?{type:"Identity"}:this._parseProjectionRHS(E.Filter),u]};case"Flatten":return{type:"Projection",children:[{type:"Flatten",children:[t]},this._parseProjectionRHS(E.Flatten)]};case"EQ":case"NE":case"GT":case"GTE":case"LT":case"LTE":return this._parseComparator(t,e);case"Lbracket":var o=this._lookaheadToken(0);return"Number"===o.type||"Colon"===o.type?(r=this._parseIndexExpression(),this._projectIfSlice(t,r)):(this._match("Star"),this._match("Rbracket"),{type:"Projection",children:[t,r=this._parseProjectionRHS(E.Star)]});default:this._errorToken(this._lookaheadToken(0))}},_match:function(e){if(this._lookahead(0)!==e){var t=this._lookaheadToken(0),r=new Error("Expected "+e+", got: "+t.type);throw r.name="ParserError",r}this._advance()},_errorToken:function(e){var t=new Error("Invalid token ("+e.type+'): "'+e.value+'"');throw t.name="ParserError",t},_parseIndexExpression:function(){if("Colon"===this._lookahead(0)||"Colon"===this._lookahead(1))return this._parseSliceExpression();var e={type:"Index",value:this._lookaheadToken(0).value};return this._advance(),this._match("Rbracket"),e},_projectIfSlice:function(e,t){var r={type:"IndexExpression",children:[e,t]};return"Slice"===t.type?{type:"Projection",children:[r,this._parseProjectionRHS(E.Star)]}:r},_parseSliceExpression:function(){for(var e=[null,null,null],t=0,r=this._lookahead(0);"Rbracket"!==r&&t<3;){if("Colon"===r)t++,this._advance();else{if("Number"!==r){var n=this._lookahead(0),i=new Error("Syntax error, unexpected token: "+n.value+"("+n.type+")");throw i.name="Parsererror",i}e[t]=this._lookaheadToken(0).value,this._advance()}r=this._lookahead(0)}return this._match("Rbracket"),{type:"Slice",children:e}},_parseComparator:function(e,t){return{type:"Comparator",name:t,children:[e,this.expression(E[t])]}},_parseDotRHS:function(e){var t=this._lookahead(0);return["UnquotedIdentifier","QuotedIdentifier","Star"].indexOf(t)>=0?this.expression(e):"Lbracket"===t?(this._match("Lbracket"),this._parseMultiselectList()):"Lbrace"===t?(this._match("Lbrace"),this._parseMultiselectHash()):void 0},_parseProjectionRHS:function(e){var t;if(E[this._lookahead(0)]<10)t={type:"Identity"};else if("Lbracket"===this._lookahead(0))t=this.expression(e);else if("Filter"===this._lookahead(0))t=this.expression(e);else{if("Dot"!==this._lookahead(0)){var r=this._lookaheadToken(0),n=new Error("Sytanx error, unexpected token: "+r.value+"("+r.type+")");throw n.name="ParserError",n}this._match("Dot"),t=this._parseDotRHS(e)}return t},_parseMultiselectList:function(){for(var e=[];"Rbracket"!==this._lookahead(0);){var t=this.expression(0);if(e.push(t),"Comma"===this._lookahead(0)&&(this._match("Comma"),"Rbracket"===this._lookahead(0)))throw new Error("Unexpected token Rbracket")}return this._match("Rbracket"),{type:"MultiSelectList",children:e}},_parseMultiselectHash:function(){for(var e,t,r,n=[],i=["UnquotedIdentifier","QuotedIdentifier"];;){if(e=this._lookaheadToken(0),i.indexOf(e.type)<0)throw new Error("Expecting an identifier token, got: "+e.type);if(t=e.value,this._advance(),this._match("Colon"),r=this.expression(0),n.push({type:"KeyValuePair",name:t,value:r}),"Comma"===this._lookahead(0))this._match("Comma");else if("Rbrace"===this._lookahead(0)){this._match("Rbrace");break}}return{type:"MultiSelectHash",children:n}}},g.prototype={search:function(e,t){return this.visit(e,t)},visit:function(e,s){var a,u,o,c,h,l,p,f,_;switch(e.type){case"Field":return null===s?null:r(s)?void 0===(l=s[e.name])?null:l:null;case"Subexpression":for(o=this.visit(e.children[0],s),_=1;_<e.children.length;_++)if(null===(o=this.visit(e.children[1],o)))return null;return o;case"IndexExpression":return p=this.visit(e.children[0],s),this.visit(e.children[1],p);case"Index":if(!t(s))return null;var d=e.value;return d<0&&(d=s.length+d),void 0===(o=s[d])&&(o=null),o;case"Slice":if(!t(s))return null;var v=e.children.slice(0),b=this.computeSliceParams(s.length,v),y=b[0],E=b[1],m=b[2];if(o=[],m>0)for(_=y;_<E;_+=m)o.push(s[_]);else for(_=y;_>E;_+=m)o.push(s[_]);return o;case"Projection":var g=this.visit(e.children[0],s);if(!t(g))return null;for(f=[],_=0;_<g.length;_++)null!==(u=this.visit(e.children[1],g[_]))&&f.push(u);return f;case"ValueProjection":if(!r(g=this.visit(e.children[0],s)))return null;f=[];var k=function(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;n++)r.push(e[t[n]]);return r}(g);for(_=0;_<k.length;_++)null!==(u=this.visit(e.children[1],k[_]))&&f.push(u);return f;case"FilterProjection":if(!t(g=this.visit(e.children[0],s)))return null;var x=[],S=[];for(_=0;_<g.length;_++)i(a=this.visit(e.children[2],g[_]))||x.push(g[_]);for(var w=0;w<x.length;w++)null!==(u=this.visit(e.children[1],x[w]))&&S.push(u);return S;case"Comparator":switch(c=this.visit(e.children[0],s),h=this.visit(e.children[1],s),e.name){case"EQ":o=n(c,h);break;case"NE":o=!n(c,h);break;case"GT":o=c>h;break;case"GTE":o=c>=h;break;case"LT":o=c<h;break;case"LTE":o=c<=h;break;default:throw new Error("Unknown comparator: "+e.name)}return o;case"Flatten":var T=this.visit(e.children[0],s);if(!t(T))return null;var N=[];for(_=0;_<T.length;_++)t(u=T[_])?N.push.apply(N,u):N.push(u);return N;case"Identity":return s;case"MultiSelectList":if(null===s)return null;for(f=[],_=0;_<e.children.length;_++)f.push(this.visit(e.children[_],s));return f;case"MultiSelectHash":if(null===s)return null;var j;for(f={},_=0;_<e.children.length;_++)f[(j=e.children[_]).name]=this.visit(j.value,s);return f;case"OrExpression":return i(a=this.visit(e.children[0],s))&&(a=this.visit(e.children[1],s)),a;case"AndExpression":return!0===i(c=this.visit(e.children[0],s))?c:this.visit(e.children[1],s);case"NotExpression":return i(c=this.visit(e.children[0],s));case"Literal":return e.value;case"Pipe":return p=this.visit(e.children[0],s),this.visit(e.children[1],p);case"Current":return s;case"Function":var L=[];for(_=0;_<e.children.length;_++)L.push(this.visit(e.children[_],s));return this.runtime.callFunction(e.name,L);case"ExpressionReference":var P=e.children[0];return P.jmespathType="Expref",P;default:throw new Error("Unknown node type: "+e.type)}},computeSliceParams:function(e,t){var r=t[0],n=t[1],i=t[2],s=[null,null,null];if(null===i)i=1;else if(0===i){var a=new Error("Invalid slice, step cannot be 0");throw a.name="RuntimeError",a}var u=i<0;return r=null===r?u?e-1:0:this.capSliceRange(e,r,i),n=null===n?u?-1:e:this.capSliceRange(e,n,i),s[0]=r,s[1]=n,s[2]=i,s},capSliceRange:function(e,t,r){return t<0?(t+=e)<0&&(t=r<0?-1:0):t>=e&&(t=r<0?e-1:e),t}},k.prototype={callFunction:function(e,t){var r=this.functionTable[e];if(void 0===r)throw new Error("Unknown function: "+e+"()");return this._validateArgs(e,t,r._signature),r._func.call(this,t)},_validateArgs:function(e,t,r){var n,i,s,a;if(r[r.length-1].variadic){if(t.length<r.length)throw n=1===r.length?" argument":" arguments",new Error("ArgumentError: "+e+"() takes at least"+r.length+n+" but received "+t.length)}else if(t.length!==r.length)throw n=1===r.length?" argument":" arguments",new Error("ArgumentError: "+e+"() takes "+r.length+n+" but received "+t.length);for(var u=0;u<r.length;u++){a=!1,i=r[u].types,s=this._getTypeName(t[u]);for(var o=0;o<i.length;o++)if(this._typeMatches(s,i[o],t[u])){a=!0;break}if(!a)throw new Error("TypeError: "+e+"() expected argument "+(u+1)+" to be type "+i+" but received type "+s+" instead.")}},_typeMatches:function(e,t,r){if(t===u)return!0;if(t!==f&&t!==p&&t!==c)return e===t;if(t===c)return e===c;if(e===c){var n;t===p?n=a:t===f&&(n=o);for(var i=0;i<r.length;i++)if(!this._typeMatches(this._getTypeName(r[i]),n,r[i]))return!1;return!0}},_getTypeName:function(e){switch(Object.prototype.toString.call(e)){case"[object String]":return o;case"[object Number]":return a;case"[object Array]":return c;case"[object Boolean]":return 5;case"[object Null]":return 7;case"[object Object]":return"Expref"===e.jmespathType?l:h}},_functionStartsWith:function(e){return 0===e[0].lastIndexOf(e[1])},_functionEndsWith:function(e){var t=e[0],r=e[1];return-1!==t.indexOf(r,t.length-r.length)},_functionReverse:function(e){if(this._getTypeName(e[0])===o){for(var t=e[0],r="",n=t.length-1;n>=0;n--)r+=t[n];return r}var i=e[0].slice(0);return i.reverse(),i},_functionAbs:function(e){return Math.abs(e[0])},_functionCeil:function(e){return Math.ceil(e[0])},_functionAvg:function(e){for(var t=0,r=e[0],n=0;n<r.length;n++)t+=r[n];return t/r.length},_functionContains:function(e){return e[0].indexOf(e[1])>=0},_functionFloor:function(e){return Math.floor(e[0])},_functionLength:function(e){return r(e[0])?Object.keys(e[0]).length:e[0].length},_functionMap:function(e){for(var t=[],r=this._interpreter,n=e[0],i=e[1],s=0;s<i.length;s++)t.push(r.visit(n,i[s]));return t},_functionMerge:function(e){for(var t={},r=0;r<e.length;r++){var n=e[r];for(var i in n)t[i]=n[i]}return t},_functionMax:function(e){if(e[0].length>0){if(this._getTypeName(e[0][0])===a)return Math.max.apply(Math,e[0]);for(var t=e[0],r=t[0],n=1;n<t.length;n++)r.localeCompare(t[n])<0&&(r=t[n]);return r}return null},_functionMin:function(e){if(e[0].length>0){if(this._getTypeName(e[0][0])===a)return Math.min.apply(Math,e[0]);for(var t=e[0],r=t[0],n=1;n<t.length;n++)t[n].localeCompare(r)<0&&(r=t[n]);return r}return null},_functionSum:function(e){for(var t=0,r=e[0],n=0;n<r.length;n++)t+=r[n];return t},_functionType:function(e){switch(this._getTypeName(e[0])){case a:return"number";case o:return"string";case c:return"array";case h:return"object";case 5:return"boolean";case l:return"expref";case 7:return"null"}},_functionKeys:function(e){return Object.keys(e[0])},_functionValues:function(e){for(var t=e[0],r=Object.keys(t),n=[],i=0;i<r.length;i++)n.push(t[r[i]]);return n},_functionJoin:function(e){return e[1].join(e[0])},_functionToArray:function(e){return this._getTypeName(e[0])===c?e[0]:[e[0]]},_functionToString:function(e){return this._getTypeName(e[0])===o?e[0]:JSON.stringify(e[0])},_functionToNumber:function(e){var t,r=this._getTypeName(e[0]);return r===a?e[0]:r!==o||(t=+e[0],isNaN(t))?null:t},_functionNotNull:function(e){for(var t=0;t<e.length;t++)if(7!==this._getTypeName(e[t]))return e[t];return null},_functionSort:function(e){var t=e[0].slice(0);return t.sort(),t},_functionSortBy:function(e){var t=e[0].slice(0);if(0===t.length)return t;var r=this._interpreter,n=e[1],i=this._getTypeName(r.visit(n,t[0]));if([a,o].indexOf(i)<0)throw new Error("TypeError");for(var s=this,u=[],c=0;c<t.length;c++)u.push([c,t[c]]);u.sort((function(e,t){var a=r.visit(n,e[1]),u=r.visit(n,t[1]);if(s._getTypeName(a)!==i)throw new Error("TypeError: expected "+i+", received "+s._getTypeName(a));if(s._getTypeName(u)!==i)throw new Error("TypeError: expected "+i+", received "+s._getTypeName(u));return a>u?1:a<u?-1:e[0]-t[0]}));for(var h=0;h<u.length;h++)t[h]=u[h][1];return t},_functionMaxBy:function(e){for(var t,r,n=e[0],i=this.createKeyFunction(e[1],[a,o]),s=-1/0,u=0;u<n.length;u++)(r=i(n[u]))>s&&(s=r,t=n[u]);return t},_functionMinBy:function(e){for(var t,r,n=e[0],i=this.createKeyFunction(e[1],[a,o]),s=1/0,u=0;u<n.length;u++)(r=i(n[u]))<s&&(s=r,t=n[u]);return t},createKeyFunction:function(e,t){var r=this,n=this._interpreter;return function(i){var s=n.visit(e,i);if(t.indexOf(r._getTypeName(s))<0){var a="TypeError: expected one of "+t+", received "+r._getTypeName(s);throw new Error(a)}return s}}},e.tokenize=function(e){return(new y).tokenize(e)},e.compile=function(e){return(new m).parse(e)},e.search=function(e,t){var r=new m,n=new k,i=new g(n);n._interpreter=i;var s=r.parse(t);return i.search(s,e)},e.strictDeepEqual=n}(t)}}]);